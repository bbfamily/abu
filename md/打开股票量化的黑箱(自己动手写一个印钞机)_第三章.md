
# æ‰“å¼€è‚¡ç¥¨é‡åŒ–çš„é»‘ç®±(è‡ªå·±åŠ¨æ‰‹å†™ä¸€ä¸ªå°é’æœº) ç¬¬ä¸‰ç« 

### ä½œè€…ï¼šé˜¿å¸ƒğŸ¶
### æœªç»æœ¬äººå…è®¸ç¦æ­¢è½¬è½½
___
##  éå‡è¡¡èƒœè´Ÿæ”¶ç›Šå¸¦æ¥çš„å¿…ç„¶éå‡è¡¡èƒœè´Ÿæ¯”ä¾‹ï¼Œç›®æ ‡ç”±å› å­çš„èƒ½åŠ›è§£å†³ä¸€éƒ¨åˆ†ï¼Œæ¨¡å¼è¯†åˆ«æå‡å…³é”®çš„ä¸€éƒ¨åˆ†

æœ¬ç« å¼€å§‹è¯´æ–‡ç« çš„æ ¸å¿ƒäº†ï¼Œ**æ¨¡å¼è¯†åˆ«æå‡å…³é”®çš„ä¸€éƒ¨åˆ†**Â æœ¬ç« çš„å†…å®¹ä¸»è¦æ˜¯é€šè¿‡æœºå™¨å­¦ä¹ å¦‚svmï¼Œéšæœºæ£®æ—ç­‰å¯¹è‚¡ç¥¨æ¨¡å¼è¯†åˆ«çš„åˆæ­¥æ¢ç´¢ï¼Œä¿—ç§°ç½ªæ¶çš„ç¬¬ä¸€æ­¥ï¼Œä½†è¿˜æ˜¯è¦åšå®šçš„å–å‡ºï¼Œæ¯•ç«Ÿç›®æ ‡æ˜¯å°é’æœº

### ä¸‹é¢è¿è¡Œå› å­å¯¹å¤šå¹´æ•°æ®è¿›è¡Œå›æµ‹ï¼Œæ¨¡å¼è¯†åˆ«ä¸­åŸºæœ¬çš„éœ€æ±‚å°±æ˜¯ç”Ÿæˆè®­ç»ƒé›†æ•°æ®ä¸æµ‹è¯•é›†æ•°æ®ï¼Œå¯¹è®­ç»ƒé›†çš„æ•°æ®æŠ½å–ç‰¹è´¨ï¼Œæ€»ç»“è§„å¾‹ï¼Œåœ¨æµ‹è¯•é›†ä¸ŠæŒ‡å¯¼äº¤æ˜“ï¼Œä¸æ²¡æœ‰æŒ‡å¯¼äº¤æ˜“çš„æµ‹è¯•é›†è¿›è¡Œæ¯”å¯¹ï¼ŒæŸ¥çœ‹æ•ˆæœã€‚

	BuyGoldenFactor.g_enable_filter_ml = True # å›æµ‹å› å­çš„å†å²ä¸”ç»“æœé›†åŠ å…¥æœºå™¨å­¦ä¹ éœ€è¦çš„æ•°æ®
	BuyGoldenFactor.g_enable_snap = True # ç”Ÿæˆäº¤æ˜“è¿™ä¸€æ—¶åˆ»60æ—¥å›¾åƒï¼Œä¸ºæ·±åº¦å­¦ä¹ å‡†å¤‡, è¯¦æƒ…è§ç¬¬å››ç« 
	buy_factors = [{'XD': 42, 'class': BuyGoldenFactorClass, 'draw': True}]

	# n_foldsï¼š 6å¹´æ•°æ®å›æµ‹ç”Ÿæˆäº”å¹´å•å­
	# train_test_splitï¼šå›æµ‹æ—¶é¢„ç•™ä¸€ä»½è‚¡ç¥¨ä»£ç è¡¨ä½œä¸ºæµ‹è¯•é›†ï¼Œç”Ÿæˆ9ä»½è®­ç»ƒé›†ï¼Œå½“use_last_testä¸ºTrue æ—¶åªç”¨ä¸€ä»½æµ‹è¯•è‚¡ç¥¨ä»£ç è¡¨è¿›è¡Œå› å­å›æµ‹
	# ret_cnt_need ï¼ 0ï¼šå›æµ‹æ‰€æœ‰è‚¡ç¥¨
	out, orders_pd_train_snap = MetricsManger.make_metrics_rsc_mul_symbol_grid(buy_factors, n_folds=6, 
	    score_type=METRICSTYPE.SYSMBOL_R_SCORES_GOLDEN.value, ret_cnt_need=0, train_test_split=True, 
	    use_last_test=False, force_one_process=False)

    pd.options.display.max_columns = 40
    orders_pd_train_snap.tail(2) # çœ‹çœ‹æ·»åŠ äº†æä¾›æœºå™¨å­¦ä¹ æ•°æ®çš„pandas


**ç”±äºç®€ä¹¦ä¸æ”¯æŒhtmlçš„è¡¨æ ¼ï¼Œå®Œæ•´è¡¨æ ¼è¯·æŸ¥é˜…gitä¸Šå®Œæ•´ç‰ˆipython notebook**
____

![Snip20161020_19.png](http://upload-images.jianshu.io/upload_images/3136804-f7e5d665a2d0ac0e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

## ä¸‹é¢ç”Ÿæˆæµ‹è¯•é›†æ•°æ®
	BuyGoldenFactor.g_enable_fiter = False
	BuyGoldenFactor.g_enable_snap = True
	buy_factors = [{'XD': 42, 'class': BuyGoldenFactorClass, 'draw': True}]
	out, orders_pd_test = MetricsManger.make_metrics_rsc_mul_symbol_grid(buy_factors, n_folds=6, 
	    score_type=METRICSTYPE.SYSMBOL_R_SCORES_GOLDEN.value, ret_cnt_need=0, train_test_split=False, 
	    use_last_test=True, force_one_process=False)

___
    orders_pd_train_snap.shape, orders_pd_test_snap.shape
        # out
        ((44412, 32), (4956, 32))

### å¯¹è®­ç»ƒé›†åŠæµ‹è¯•é›†çš„ç»“æœè¿›è¡Œå¤§ä½“çš„åº¦é‡ï¼šä¸»è¦å°±æ˜¯çœ‹çœ‹**éå‡è¡¡èƒœè´Ÿæ”¶ç›Šå¸¦æ¥çš„å¿…ç„¶éå‡è¡¡èƒœè´Ÿæ¯”ä¾‹ï¼Œç›®æ ‡ç”±å› å­çš„èƒ½åŠ›è§£å†³ä¸€éƒ¨åˆ†**æ•ˆæœæ€ä¹ˆæ ·

	train_ump = UmpMainClass(orders_pd_train_snap, MlFiterGoldenPdClass)
	train_ump.show_general()
        # out
		all fit order = (41225, 32)
		win rate = 0.493559733172
		profit_cg.sum() = 281.687935222
		win mean = 0.0770327160087 loss_mean = -0.061738192442 

      
![output_14_1.png](http://upload-images.jianshu.io/upload_images/3136804-620ccd99d1834089.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

	test_ump = UmpMainClass(orders_pd_test_snap, MlFiterGoldenPdClass)
	test_ump.show_general()
		# out
		all fit order = (4612, 32)
		win rate = 0.5
		profit_cg.sum() = 37.4002795407
		win mean = 0.076550446692 loss_mean = -0.0605681543452 


![output_15_1.png](http://upload-images.jianshu.io/upload_images/3136804-d55a506c189d97fc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

æ˜¾ç¤ºåœ¨æ‰€æœ‰æœ‰ç»“æœçš„å•å­ä¸­èƒœç‡å¯ä»¥æ¥è¿‘ä¸€åŠï¼Œä¸”æ¯æ¬¡èµ¢çš„0.07æ¯”æ²¡æ¬¡è¾“çš„0.06å¤šï¼Œ
ä½†æ˜¯è´ªå©ªçš„æˆ‘ä»ç„¶è®¤ä¸ºæœ‰ä¼˜åŒ–ç©ºé—´ï¼Œè¿™ä¸ªç©ºé—´å°±æ˜¯åˆ©ç”¨è¿™ä¸ªå› å­äº§ç”Ÿçš„è¾“å‡ºæ•°æ®
ä½œä¸ºç‰¹å¾è¯†åˆ«åŸºç¡€ï¼Œæç‚¼ç‰¹å¾ï¼ŒæŒ‡å¯¼äº¤æ˜“ï¼Œ

**æ¨¡å¼è¯†åˆ«æå‡å…³é”®çš„ä¸€éƒ¨åˆ†**

ä¸‹é¢æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åšåˆ°çš„å‘¢

é¦–å…ˆç¡®è®¤mlå°è£…åº“æ˜¯å¦èƒ½æ­£å¸¸è¿è¡Œ

    test_fiter_more = MlFiterClass.create_test_more_fiter()
**å­¦ä¹ æ›²çº¿**

    test_fiter_more.estimator.logistic_regression()
    test_fiter_more.plot_learning_curve()


![output_20_0.png](http://upload-images.jianshu.io/upload_images/3136804-c9662ca50bba2a28.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

**ç‰¹å¾æƒé‡**

    test_fiter.importances_coef_pd()


![Snip20161020_20.png](http://upload-images.jianshu.io/upload_images/3136804-fe24871317e2006e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

**æ ‘é€»è¾‘å›¾**

    test_fiter.plot_graphviz_tree()


![output_24_0.png](http://upload-images.jianshu.io/upload_images/3136804-d371aebea9e68ce0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

**æ··æ·†çŸ©é˜µ**

    test_fiter_more.plot_confusion_matrices()
        # out
        [[453  96]
         [100 242]]


![output_26_1.png](http://upload-images.jianshu.io/upload_images/3136804-7ebd22c7bd0a293b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

**roc**

    test_fiter_more.plot_roc_estimator()
    
![output_28_1.png](http://upload-images.jianshu.io/upload_images/3136804-7797ba3bf36f827f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

**ç‰¹å¾é€‰æ‹©**

	test_fiter_more.feature_selection()
        # out
		RFE selection
		             ranking support
		SibSp              1    True
		Parch              1    True
		Cabin_No           1    True
		Cabin_Yes          6   False
		Embarked_C         2   False
		Embarked_Q         5   False
		Embarked_S         3   False
		Sex_female         8   False
		Sex_male           1    True
		Pclass_1           4   False
		Pclass_2           7   False
		Pclass_3           1    True
		Age_scaled         1    True
		Fare_scaled        1    True

		RFECV selection
		             ranking support
		SibSp              1    True
		Parch              2   False
		Cabin_No           1    True
		Cabin_Yes          7   False
		Embarked_C         3   False
		Embarked_Q         8   False
		Embarked_S         4   False
		Sex_female         1    True
		Sex_male           9   False
		Pclass_1           5   False
		Pclass_2           6   False
		Pclass_3           1    True
		Age_scaled         1    True
		Fare_scaled        1    True

**å†³ç­–è¾¹ç•Œ**

    test_fiter.plot_decision_function()
![output_32_0.png](http://upload-images.jianshu.io/upload_images/3136804-9474afdf08cfb776.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


![output_32_1.png](http://upload-images.jianshu.io/upload_images/3136804-b9b2a0c43119e8a0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

**train test score**

    test_fiter_more.cross_val_accuracy_score()
        # out
        accuracy mean: 0.776812507093
        array([ 0.75555556,  0.72222222,  0.73033708,  0.75280899,  0.83146067,
        0.78651685,  0.80898876,  0.71910112,  0.82022472,  0.84090909])

**åˆ‡æ¢ä½¿ç”¨å…¶å®ƒå­¦ä¹ æ–¹æ³•**

    test_fiter_more.estimator.adaboost_classifier()
    test_fiter_more.cross_val_accuracy_score()
        # out
        accuracy mean: 0.810433548973
        array([ 0.78888889,  0.78888889,  0.78651685,  0.80898876,  0.84269663,
        0.78651685,  0.82022472,  0.82022472,  0.79775281,  0.86363636])


å¯ä»¥è¯æ˜å°è£…åº“æ²¡æœ‰é—®é¢˜ï¼Œå¯ä»¥æ”¾å¿ƒä½¿ç”¨ï¼Œä¸‹ä¸€æ­¥ä¸ŠçœŸæ­£çš„è‚¡ç¥¨æ•°æ®

ç”±252ï¼Œ60ï¼Œ 42å¤©ç»„æˆçš„èµ°åŠ¿æ•°å‰§ä½œä¸ºç‰¹è´¨å¼€å§‹

    from MlFiterDegPd import MlFiterDegPdClass
    deg = MlFiterDegPdClass(orderPd=orders_pd_train_snap)
    deg.df.head()


![Snip20161020_21.png](http://upload-images.jianshu.io/upload_images/3136804-0f0e7bed61384972.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

    deg().estimator.svc()
    deg().cross_val_accuracy_score()
        # out
        accuracy mean: 0.491279520472
        array([ 0.48920689,  0.51758428,  0.49987873,  0.49551298,  0.48168809,
        0.4887218 ,  0.47610963,  0.47355653,  0.4853191 ,  0.50521718])

**0.49çš„å‡†ç¡®ç‡ï¼Œç›¸å½“äºæ˜¯ä¹±çŒœ** æ˜¯ä¸æ˜¯ç‰¹å¾é€‰æ‹©çš„ä¸å¥½å‘¢ï¼Œæ¢ä¸€äº›ç‰¹å¾è¯•è¯•

    from MlFiterMainPd import MlFiterMainPdClass
    main = MlFiterMainPdClass(orderPd=orders_pd_train_snap)
    main.df.head()


![Snip20161020_22.png](http://upload-images.jianshu.io/upload_images/3136804-51baa44f90edff70.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

    main().cross_val_accuracy_score()
        # out
        accuracy mean: 0.493608245706
        array([ 0.5008489 ,  0.49890856,  0.49793839,  0.48678147,  0.50303177,
        0.47125879,  0.49648314,  0.49369238,  0.49332686,  0.49381218])

**0.49çš„å‡†ç¡®ç‡ï¼Œè¿˜æ˜¯ä¹±çŒœ** æ˜¯ä¸æ˜¯ç‰¹å¾å¤ªå°‘äº†ï¼Œæ„å»ºä¸€ä¸ªç‰¹å¾å¤šçš„è¯•è¯•

	from MlFiter import MlFiterClass
	order_has_ret = orders_pd_train_snap[(orders_pd_train_snap.result <> 0)]

	all_pd = order_has_ret.filter(['result', 'deg_hisWindowPd', 'deg_windowPd', 'deg_60WindowPd', 'atr_std', 'jump_power', 
	                               'diff_days', 'wave_score1', 'wave_score2', 'wave_score23'])
	train_np = all_pd.as_matrix()
	y = train_np[:, 0]
	x = train_np[:, 1:]
	all_filter = MlFiterClass(x, y, all_pd)
	all_pd.head()


![Snip20161020_23.png](http://upload-images.jianshu.io/upload_images/3136804-08ce48c9e732b998.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

    # è¿™å›ä½¿ç”¨éšæœºæ£®æ—
    all_filter.estimator.random_forest_classifier()
    all_filter.cross_val_accuracy_score()
        # out
        accuracy mean: 0.505349477658
        array([ 0.48678147,  0.50788261,  0.53019646,  0.50497211,  0.51297599,
        0.46058695,  0.51564395,  0.50994663,  0.4942975 ,  0.53021111])

**0.50çš„å‡†ç¡®ç‡ï¼Œè¿™ç®—æ˜¯æœ‰æ‰€æå‡å—ï¼ŸğŸ˜¥**

### ä¸‹é¢æŠŠæ•°æ®ç¦»æ•£åŒ–åï¼Œæ¢ç§åˆ†ç±»å™¨æµ‹è¯•

	deg = MlFiterDegPdClass(orderPd=orders_pd_train_snap, dummies=True, invoke_hmm=False,
	                       invoke_pca=False)
	deg.df.head()

    
**ç”±äºç®€ä¹¦ä¸æ”¯æŒhtmlçš„è¡¨æ ¼ï¼Œå®Œæ•´è¡¨æ ¼è¯·æŸ¥é˜…gitä¸Šå®Œæ•´ç‰ˆipython notebook**
____
![Snip20161022_52.png](http://upload-images.jianshu.io/upload_images/3136804-d171d43a3260ba7c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


ä¸Šè¾¹å°ä½å¥½äº†çš„ï¼Œåœ¨ç¦»æ•£å€¼çš„é€‰æ‹©ä¸Šä¸æ˜¯çæ¥çš„ï¼Œä¼šé€šè¿‡å¯è§†åŒ–æ¥é€‰æ‹©ç¦»æ•£å€¼binsï¼Œ**é€šè¿‡æ•°æ®æ¥æŒ‡å¯¼æ•°æ®æœ€ç»ˆæŒ‡å¯¼äº¤æ˜“**

    deg().estimator.random_forest_classifier()
    deg().cross_val_accuracy_score()
        # out
        accuracy mean: 0.487590577522
        array([ 0.48217317,  0.51564395,  0.4962406 ,  0.49890856,  0.49745331,
        0.48338588,  0.49527043,  0.45414847,  0.44479495,  0.50788644])
**ç»“æœè¿˜æ˜¯ä¹±çŒœ**

ç”¨å…¶å®ƒç­‰ç­‰æ–¹å¼ä»ç„¶æ˜¯èƒ¡çŒœï¼Œè‡ªå·±å†™çš„ç±»ä¼¼adaboostä¾ç„¶æ•ˆæœå¾ˆå·®, é€šè¿‡éå‡è¡¡æ¦‚ç‡é™ä½å‡é˜³ï¼Œæé«˜å‡é˜´çš„æ–¹å¼ï¼Œæœ€åç»Ÿè®¡æ‰€æœ‰æµ‹è¯•é›†æ ·æœ¬çš„åˆ¤åˆ«æ¦‚ç‡å‘ç°å…¶å®è¿˜ççŒœ

### æé«˜åˆ†ç±»æ•°é‡ï¼Œè®¾ç½®é˜€å€¼ï¼Œæé«˜å‡†ç¡®ç‡çš„æ–¹æ¡ˆ


**é€šè¿‡å°†profit cg qcut 100ä»½åˆ†ç±»**
 
	orders_pd_train_snap.profit_cg.fillna(0, inplace=True)
	order_has_ret = orders_pd_train_snap[(orders_pd_train_snap.result <> 0)]
	n_class = 100
	order_has_ret['class'] = pd.qcut(order_has_ret.profit_cg, n_class, labels=range(0, n_class))
	order_has_ret['class'] = order_has_ret['class'].astype(int)
	ZLog.info(np.unique(order_has_ret['class']))

	deg_pd = order_has_ret.filter(['class', 'result', 'deg_hisWindowPd', 'deg_windowPd', 'deg_60WindowPd'])
	train_np = deg_pd.as_matrix()
	y = train_np[:, 0]
	x = train_np[:, 1:]
	deg = MlFiterClass(x, y, deg_pd, force_clf=True)
	deg_pd.head()


![Snip20161020_24.png](http://upload-images.jianshu.io/upload_images/3136804-5d606217f3df1787.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

* yä¸ºclass train_test_splitè¿›è¡Œåˆ†ç±»
* ä½¿ç”¨cvæ•°æ®é›†çš„ predict < classé˜€å€¼ ä½¿ç”¨result==0çš„æƒ…å†µæŸ¥çœ‹æ¦‚ç‡


	from sklearn.cross_validation import train_test_split
	from sklearn.metrics import accuracy_score
	from sklearn.metrics import classification_report

	deg.estimator.random_forest_classifier()

	train_df, cv_df = train_test_split(deg.df, test_size=0.1, random_state=0)

	fiter = deg.get_fiter()
	fiter.fit(train_df.as_matrix()[:, 2:], train_df.as_matrix()[:, 0])

	predictions = fiter.predict(cv_df.as_matrix()[:, 2:])

	cv_df['predict'] = predictions
	cv_df.head()


![Snip20161020_25.png](http://upload-images.jianshu.io/upload_images/3136804-aec277813af13d42.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

    cv_df['predict'].value_counts().sort_index().head(10)
        # out
		0.0    56
		1.0    50
		2.0    43
		3.0    47
		4.0    44
		5.0    45
		6.0    47
		7.0    30
		8.0    46
		9.0    39
		Name: predict, dtype: int64        

___
	for threshold in np.arange(0, 10):
	    ppv = cv_df[cv_df['predict'] <= threshold].result.value_counts()
	    ZLog.info('threshold: {}, ppv: {}'.format(threshold, float(ppv[-1])/ppv.sum()))
        # out
		threshold: 0, ppv: 0.607142857143
		threshold: 1, ppv: 0.632075471698
		threshold: 2, ppv: 0.58389261745
		threshold: 3, ppv: 0.586734693878
		threshold: 4, ppv: 0.579166666667
		threshold: 5, ppv: 0.571929824561
		threshold: 6, ppv: 0.551204819277
		threshold: 7, ppv: 0.541436464088
		threshold: 8, ppv: 0.526960784314
		threshold: 9, ppv: 0.523489932886

### threshold: 0ï¼Œ1ï¼Œè¾¾åˆ°0.6äº† ä½†æ˜¯æ•°é‡ä¸Šåªæœ‰100å¤šä¸ªï¼Œä¹‹åä¼šæœ‰ä½¿ç”¨gmmï¼hmmçš„æ–¹å¼ç»§ç»­æ‰©å±•è¿™ç§æ€è·¯ï¼Œæé«˜æ”¶ç›Š

### åªèƒ½è¯´æœ€åä¸€ç§çš„è¿™ä¸ªæ€æƒ³å¯ä»¥ä½œä¸ºæ‰©å±•ä½¿ç”¨ï¼Œå®é™…ä¸­ç”±äº 'éå‡è¡¡èƒœè´Ÿæ”¶ç›Š' å¾ˆéš¾å¸¦æ¥è´¨çš„å¥½è½¬ï¼Œçªç„¶æƒ³åˆ°é˜¿è¥¿è«å¤«çš„å°è¯´åŸºåœ°ï¼Œå¯¹å¿ƒç†å²å­¦çš„æœ€å¼€å§‹çš„è¯„ä¼°ï¼Œâ€˜å¯èƒ½ä½†æ˜¯ä¸å¯è¡Œâ€™ï¼Œæˆ‘ä»¬çš„å°é’æœºä¹‹è·¯æ˜¯å¦ä¹Ÿæ˜¯è¿™æ ·å‘¢ï¼Œä¸‹ä¸€ç« å¼€å§‹å°±æ˜¯çœŸæ­£çš„å°é’æœºä¹‹è·¯äº†ï¼Œä¸€ä¸ªå³å¯èƒ½åˆå¯è¡Œä¹‹è·¯ï¼ï¼ï¼ ä¸‹ä¸€ç« å¼€å§‹å°†ä½¿ç”¨æ·±åº¦å­¦ä¹ æ–¹æ³•æ¥è®­ç»ƒæ•°æ®ï¼Œæé«˜èƒœç‡ä¸»è¦æ˜¯å·æœºç¥ç»ç½‘ç»œçš„ä½¿ç”¨
____

## æ„Ÿè°¢ğŸ™æ‚¨èƒ½æœ‰è€å¿ƒçœ‹åˆ°è¿™é‡Œ
## å¦‚æœæœ‰ä»€ä¹ˆé—®é¢˜å¯ä»¥åŠ é˜¿å¸ƒçš„å¾®ä¿¡ 
## å¾®ä¿¡å·ï¼šaaaabbbuu


![mmexport1475383814280.jpg](http://upload-images.jianshu.io/upload_images/3136804-e0f6ca2c7ee1791c.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)